ARG BUILDER_CACHE_TARGET=markhobson/maven-chrome
FROM ${BUILDER_CACHE_TARGET} as builder
ARG ARTIFACT_VERSION=1.0-SNAPSHOT
RUN mkdir -p /build
WORKDIR /build
COPY pom.xml /build
RUN mvn -B -f pom.xml dependency:go-offline
COPY . /build
RUN mvn clean package -Dartifact.version=${ARTIFACT_VERSION} -Dcheckstyle.skip ; echo $? > ./test-status.log ; exit 0